(function(a){a.fn.combobox=function(b){var c=a.extend({target_input:"input",target_select:"select",z_index:9999,allow_magnify_input:false,match_color:"#ddf",init_data:"",select_arrow_width:20},b);this.css("position","relative").css("margin",0).css("padding",0);this.find(c.target_input).css("position","absolute").css("float","left");this.find(c.target_select).css("position","absolute").css("float","left");this.each(function(f,e){var g=a(e).find(c.target_input);var h=g;var d=a(e).find(c.target_select);d.show();h.css("z-index",c.z_index+f*2+1);d.css("z-index",c.z_index+f*2).css("font-size",h.css("font-size")).css("margin",h.css("margin")).css("padding",h.css("padding")).css("font-size",h.css("font-size"));if(h.css("text-align")==="right"){h.css("right","0px");d.css("direction","rtl")}if(h.outerHeight(true)>d.outerHeight(true)){d.height(d.height()+h.outerHeight(true)-d.outerHeight(true))}if(h.outerHeight(true)<d.outerHeight(true)){if(c.allow_magnify_input===false){d.height(d.height()+d.outerHeight(true)-h.outerHeight(true))}else{h.height(h.height()+d.outerHeight(true)-h.outerHeight(true))}}a(e).css("height",d.outerHeight(true));if(h.width()>d.width()+c.select_arrow_width){d.width(h.width()+c.select_arrow_width)}if(h.width()<d.width()+c.select_arrow_width){if(c.allow_magnify_input===false){d.width(h.width()+c.select_arrow_width)}else{h.width(d.width()-c.select_arrow_width)}}a(e).css("width",d.outerWidth(true));d.find("option").each(function(j,k){a(k).data("org-bg-color",a(k).css("background-color"))});d.on("change",function(i){h.val(a(this).find("option:selected").text());d.find("option").each(function(j,k){a(k).css("background-color",a(k).data("org-bg-color"))})});h.on("keyup",function(i){d.val("");d.find("option").each(function(j,k){a(k).css("background-color",a(k).data("org-bg-color"));if(k.text.match(h.val())){a(k).css("background-color",c.match_color)}if(k.text===h.val()){d.val(k.value);d.change()}})});if(c.init_data!==""){g.val(c.init_data)}if(g.val()){h.keyup()}});return this}})(jQuery);